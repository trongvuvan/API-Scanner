{% extends 'base.html' %}
{% block content %}
    <center><h1>{% block title %}  {{project.projectname}}  {% endblock %}</h1></center>
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/showuser.css') }}">
  </br></br></br>
  <center>
    <a href="{{ url_for('download_report',id= project.projectid)}}" class="btn btn-success" style="float: right;" role="button" aria-pressed="true">Download Report</a>
</center></br>
<div>
  {% for havebug in havebug %}
  {{ havebug.requestid}}t
  {% endfor %}
  total : {{totalrequest}}
  done : {{donerequest}}
  remain : {{remain}}
</div>
<div>
    <table class="table" style="width:100%">
        <thead class="thead-dark" style="width:100%">
          <tr>
            <th>
            <input name="select-all" id="select-all" type="checkbox" value="" aria-label="" onClick="toggle(this)">
            </th>
            <th style="text-align: center" scope="col">#</th>
            <th style="text-align: center" cope="col">Project Request URL</th>
            <th style="text-align: center" scope="col">Status</th>
            <th style="text-align: center" scope="col">Bug</th>
            <th style="text-align: center" scope="col">Do active scan</th>
            <th style="text-align: center;width: 8%;" scope="col">Test Date</th>
            <th style="text-align: center" scope="col">Test by</th>
          </tr>
        </thead>
        <tbody>
          <p style="color:red;">{{msg}}</p>
        {% for request in requests %}
          <tr>
            <th>
              <input type="checkbox" id="checkboxNoLabel" value="request.requestid" aria-label="">
            </th>
            <th style="text-align: center" class="counterCell"></th>
            <td >{{ request.requesturl }}</td>
            <td style="text-align: center" >{{ request.status }}</td>
            {% if request.isscan == 1 %}
              {% if request.bug == "Bug Found"%}
            <th style="color:red;text-align: center;"scope="row"><a style="color:red" href="{{ url_for('bug_detail',id= request.requestid) }} ">{{ request.bug }}!</a></th>
              {%else%}
              <th style="text-align: center" style="color: red"scope="row"><a style="color:green">Safe</a></th>
              {% endif %}
            {% elif request.isscan != 1%}
              <td style="text-align: center"><a style="color:blue">Run scan to know</a></td>
            {% endif %}
      
            {% if request.isscan != 1 %}
            <td style="text-align: center" > 
              <span style="float:center;">
              <a href="{{ url_for('activescan',id= request.requestid) }} "class="btn btn-success">Active scan</a>
              </span>
            </td>
            {% else %}
            <td style="text-align: center" > 
              <span style="float:center;">
              Had been scanned
              </span>
            </td>
            {% endif %}
            <td style="text-align: center">{{ request.testdate }}</td>
            <td style="text-align: center">{{ request.pentester }}</td>
          {% endfor %}
        </tbody>
      </table> 
    </div>
  <script type="text/javascript">// <![CDATA[
        function loading(){
            $("#loading").show();
            $("#content").hide();       
        }
// ]]></script>
<script>
  function toggle(source) {
    var checkboxes = document.querySelectorAll('input[type="checkbox"]');
    for (var i = 0; i < checkboxes.length; i++) {
        if (checkboxes[i] != source)
            checkboxes[i].checked = source.checked;
    }
} 
</script>
{% endblock %}