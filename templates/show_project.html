{% extends 'base.html' %}
{% block content %}
    <center><h1>{% block title %}  Project List  {% endblock %}</h1></center>
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/showuser.css') }}">
    <a href="{{ url_for('add_project')}}" class="btn btn-primary" style="float: right;" role="button" aria-pressed="true">Create Project</a>
  </br></br></br>
  <center>
  <form action="{{ url_for('search_project') }}" method ="GET">
    <input name="projectname" type="projectname" placeholder="Search Project" />
    <button>Search</button>
  </form>
</center></br>
<div >
    <table class="table" style="width:100%">
        <thead class="thead-dark" style="width:100%">
          <tr>
            <th style="text-align: center"width="5%" scope="col">#</th>
            <th style="text-align: center"width="10%" scope="col">Project Name</th>
            <th style="text-align: center"width="20%" scope="col">Start Date</th>
            <th style="text-align: center"width="20%" scope="col">End Date</th>
            <th style="text-align: center"scope="col">Target</th>
            <th style="text-align: center"scope="col">Project Manager</th>
            <th style="text-align: center"scope="col">Pentester</th>
            <th style="text-align: center"scope="col">Vunls</th>
            <th style="text-align: center"scope="col">Create by</th>
            <th style="text-align: center"scope="col">Status</th>
            <th style="text-align: center"scope="col">Login Required</th>
            <th style="text-align: center"scope="col">Project Username</th>
            <th style="text-align: center"scope="col">Project Password</th>
            <th style="text-align: center"width="30%" scope="col">Action</th>
            <th style="text-align: center"width="30%" scope="col">Run spider</th>
          </tr>
        </thead>
        <tbody>
          <p style="color:red;">{{msg}}</p>
        {% for project in projects %}
        
          <tr >
            <th style="text-align: center" class="counterCell"></th>
            <th style="text-align: center"class="align-middle" scope="row"><a href="{{ url_for('project_detail',id= project.projectid) }} ">{{ project.projectname }}</a></th>
            <td style="text-align: center"class="align-middle" >{{ project.startdate }}</td>
            <td style="text-align: center"class="align-middle" >{{ project.enddate }}</td>
            <td style="text-align: center"class="align-middle" >{{ project.target }}</td>
            <td style="text-align: center"class="align-middle" >{{ project.manager }}</td>
            <td style="text-align: center"class="align-middle" >{{ project.pentester }}</td>
            <td style="text-align: center"class="align-middle" >{{ project.vunls }}</td>
            <td style="text-align: center"class="align-middle" >{{ project.create_by }}</td>
            <td style="text-align: center"class="align-middle" >{{ project.status }}</td>
            {% if project.login == 1 %}
            <td style="text-align: center"class="align-middle" >Yes</td>
            {% else %}
            <td style="text-align: center"class="align-middle" >No</td>
            {% endif %}
            <td style="text-align: center"class="align-middle" >{{ project.userinfo }}</td>
            <td style="text-align: center"class="align-middle" >{{ project.passinfo }}</td>
            <td style="text-align: center"class="align-middle" > 
              <span style="float:left;">
              <a href="{{ url_for('editproject',id= project.projectid) }} "class="btn btn-primary">Edit</a>
              </span>
              <span style="float:left;">
              <form action="{{ url_for('showproject') }}" method=post >
                  <input name="projectid" type=hidden value="{{ project.projectid }}"/>
                  <button id="delete" type=submit class="btn btn-danger" >Delete</button>
              </form>
            </span>
            </td>
            {% if project.isspider != '1' %}
            <td style="text-align: center" class="align-middle" > 
              <span style="float:center;">
              <a href="{{ url_for('spiderscan',id= project.projectid) }} "class="btn btn-success">spider</a>
              </span>
            </td>
            {% else %}
            <td style="text-align: center" class="align-middle" > 
              <span style="float:center;">
              <a>have been spidered</a>
              </span>
            </td>
            {% endif %}
          </td>
          </tr>
        {% endfor %}
        </tbody>
      </table> 
    </div>
{% endblock %}